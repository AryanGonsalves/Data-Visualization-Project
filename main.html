<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scrollytelling Outline</title>
    <link rel="stylesheet" href="main.css">
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://d3js.org/topojson.v1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/us-atlas@3/states-10m.json"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/d3-legend/2.9.0/d3-legend.js"></script>
    <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>

</head>
<body>


    <!-- TODO: use sticky images -->
    <!-- https://www.elperiodico.com/es/sociedad/musk-bezos-carrera-espacial-luna-sh/ -->
    <div class="scrolly-container">
        <div class="text">
            <!-- 7 different SVGs, one for each section. keep everything nice and separate -->
            <img src="images/intro_top_banner.png" id="banner-image" width="100%" class="intro_image" />
            <div id="breaking-news-banner">
                <span id="breaking-news-live">LIVE</span>
                <span id="breaking-news-text">BREAKING NEWS: Election 2024: A Demographic Story of Trump and Harris</span>
              </div>
            <!-- <img src="images/breaking_news_banner.png" id="banner-image-bottom" width="100%" class="image" /> -->
            <div class="step intro" data-step="1">
                <div class="intro-container">
                    <div class="intro-image-container">
                        <img src="images/interviewer_intro.png" id="intro-image-1" class="intro-image" />
                        <img src="images/pre_intro.png" id="intro-image-2" class="intro-image" />
                    </div>
                </div>
            </div>
            <div class="step safety" data-step="2">
                <h2>Safety Over the Years</h2>
                <div class="intro-image-container">
                    <img src="images/interviewer_safety.png" id="intro-image-1" class="intro-image" />
                    <img src="images/pres_safety.png" id="intro-image-2" class="intro-image" />
                </div>
                <h2>This chart displays the distribution of gun violence in schools and traffic accident rates across different states. Hover over the map to highlight the corresponding state's data on the pie chart for a clearer breakdown of each state's contribution.</h3>
                <div id="controls" class="safety-controls" style="
                    display: flex; 
                    flex-direction: row; 
                    align-items: center; 
                    background-color: #f9f9f9; 
                    border: 1px solid #ddd; 
                    border-radius: 8px; 
                    padding: 10px 15px; 
                    margin-bottom: 10px; 
                    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);">
                    <div class="control-group" style="
                        display: flex; 
                        align-items: center; 
                        margin-right: 15px;">
                        <label for="dataset" style="
                            font-size: 13px; 
                            font-weight: 500; 
                            margin-right: 5px; 
                            color: #555;">Dataset:</label>
                        <select id="dataset" style="
                            padding: 5px 8px; 
                            font-size: 13px; 
                            border: 1px solid #ccc; 
                            border-radius: 4px; 
                            background-color: #fff; 
                            outline: none; 
                            transition: border-color 0.3s ease;">
                            <option value="shooting">School Shootings</option>
                            <option value="traffic">Traffic Fatalities</option>
                        </select>
                    </div>
                    <div class="control-group" style="
                        display: flex; 
                        align-items: center; 
                        margin-right: 15px;">
                        <label for="x-axis" style="
                            font-size: 13px; 
                            font-weight: 500; 
                            margin-right: 5px; 
                            color: #555;">X-Axis:</label>
                        <select id="x-axis" style="
                            padding: 5px 8px; 
                            font-size: 13px; 
                            border: 1px solid #ccc; 
                            border-radius: 4px; 
                            background-color: #fff; 
                            outline: none; 
                            transition: border-color 0.3s ease;">
                            
                        </select>
                    </div>
                    <div class="control-group" style="
                        display: flex; 
                        align-items: center;">
                        <label for="y-attribute" style="
                            font-size: 13px; 
                            font-weight: 500; 
                            margin-right: 5px; 
                            color: #555;">Y-Axis:</label>
                        <select id="y-attribute" style="
                            padding: 5px 8px; 
                            font-size: 13px; 
                            border: 1px solid #ccc; 
                            border-radius: 4px; 
                            background-color: #fff; 
                            outline: none; 
                            transition: border-color 0.3s ease;">
                            
                        </select>
                    </div>
                    
                    <button id="toggle-visualization" style="
                        padding: 8px 12px; 
                        font-size: 14px; 
                        border: none; 
                        border-radius: 4px; 
                        background-color: #007bff; 
                        color: white; 
                        cursor: pointer; 
                        margin-left: 15px;">Switch to Pie Chart</button>
                </div>
                
                
                <div class="flex-container" style="
                    display: flex; 
                    flex-direction: row; 
                    justify-content: space-between;">
                    <div id="barplot-container" style="width: 50%;">
                        <svg id="barplot"></svg>
                    </div>
                    <div id="map-container" style="width: 50%;">
                        <svg id="us-map"></svg>
                    </div>
                </div>
                <script type="module" src="safety.js"></script>
            </div>
            <div class="step health" data-step="3">
                <div class="intro-image-container">
                    <img src="images/interviewer_health.png" id="intro-image-1" class="intro-image" />
                    <img src="images/pres_health.png" id="intro-image-2" class="intro-image" />
                </div>
                <h2>This lollipop chart shows the percentage of uninsured individuals across different states, grouped by gender or age, and further categorized by political affiliation (Democratic or Republican). Hover over the chart to see detailed data for each state and demographic group.</h2>
                <div style="position: relative;">
                    <svg id="visualization-health" width="800" height="400" style="display: block;"></svg>
                    
                    <!-- Dropdown for Choose a state -->
                    <div style="position: absolute; top: 20px; left: 20px; z-index: 10;">
                        <label for="state-select" style="font-size: 14px; color: #004d40;">Choose a state:</label>
                        <select id="state-select" style="font-size: 14px;">
                            <!-- States will be populated here -->
                        </select>
                    </div>
            
                    <!-- Dropdown for Choose a view, moved to the right with padding below -->
                    <div style="position: absolute; top: 20px; left: 300px; z-index: 10;"> <!-- Adjusted left value -->
                        <label for="view-select" style="font-size: 14px; color: #004d40;">Choose a view:</label>
                        <select id="view-select" style="font-size: 14px;">
                            <!-- View options (Gender, Age Group) will be populated here -->
                        </select>
                    </div>
            
                    <!-- Padding below the dropdowns -->
                    <div style="position: absolute; top: 100px; left: 20px; z-index: 10; padding-top: 20px;">
                        <!-- Additional content or padding can go here -->
                    </div>
                </div>
            </div>                      
            <div class="step economy" data-step="4">
                <h2>
                    US Economy Analysis
                </h2>
                
            <div class = "row">
                <div class="col-sm-12 center-align form-group">
                    <label for="dataset" style="font-size: 20px">Select the factor to visualize</label>
                    <select class="form-control" id="dataset" onchange="updateMap(value)" style="width: 25%;margin: auto">
                        <option selected value="unemployement">UNEMPLOYEMENT_RATE</option>
                        <option value="population">POPULATION</option>
                        <option value="salary">AVERAGE_SALARY/MON</option>
                        <option value="price">RENTAL COST [PRICE/SQ. FT.]</option>
                        <option value="mortality">MORTALITY_RATE</option>
                    </select>
                </div>
            </div>
            <div class="row">
                <div  class="col-sm-7 pull-left" id="map-view">
                </div>
                <div id="bar-chart" class="col-sm-5 pull-left">
                    <div id="average"></div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-12" id="table">
            </div>
        </div>
        <div class="row">
            <div class="col-sm-12" id="nationalAvgLegend">
            </div>
        </div>
        <div class="row">
            <div class="col-sm-12" id="legend">
            </div>
        </div>
        
        <hr>
        <h2 style="text-align: center">Your Personal State Recommender</h2>
        <hr style="width: 40%;margin: auto">
        
        
        <div class="row">
            <h3 style="text-align: center">Rank the below factors from 0 to 5 as per your priority</h3>
            <h5 style="text-align: center">[0:Not Important 5:Most Important]</h5>
            <div class="col" id="userInputTable" >
                <div class="form-row">
                    <div class="form-group col-md-2">
                        <label for="unemployement">Unemployment Rate</label>
                        <input value='' type="text" class="form-control" id="unemployement">
                    </div>
                    <div class="form-group col-md-2">
                        <label for="population">Population</label>
                        <input value='' type="text" class="form-control" id="population">
                    </div>
                    <div class="form-group col-md-2">
                        <label for="salary">Average Salary</label>
                        <input value = '' type="text" class="form-control" id="salary">
                    </div>
                    <div class="form-group col-md-2">
                        <label for="rental">Rental Cost</label>
                        <input value='' type="text" class="form-control" id="rental">
                    </div>
                    <div class="form-group col-md-2">
                        <label for="mortality">Average Mortality Rate</label>
                        <input value='' type="text" class="form-control" id="mortality">
                    </div>
                    <div class="form-group col-md-2">
                        <button type="button" id="ShowButton" class="btn" style="margin-top:15px;background-color: #8b221b;color: #ffffff" onclick="getTopStates()">Give my top states</button>
                    </div>
        
                    <br><br>
                    <br><br>
        
                    <hr width="60%" size="5px" style="border-top: 3px solid #ff7b7b; ">
        
                </div>
            </div>
        </div>
        
        <div class="row" style="margin: 0px">
            <div class="col-sm-6" id="infoPanel" style="display:none;">
                <h4 style="text-align: center">Top 3 recommended states</h4>
                <div class="row">
                    <div class="col-sm-10">
                        <div class="row" style="margin: 0px">
                            <div class="row" style="margin: 0px">
                                <div class="col-sm-3">
                                    <h5 id="state1"></h5>
                                </div>
                                <div class="col-sm-9">
                                    <svg id="weight1" height="20px" width="700"></svg>
                                </div>
                            </div>
                            <div class="row" style="margin: 0px">
                                <div class="col-sm-12">
                                </div>
                            </div>
                        </div>
                        <div class="row" style="margin: 0px">
                            <div class="row" style="margin: 0px">
                                <div class="col-sm-3">
                                    <h5 id="state2"></h5>
                                </div>
                                <div class="col-sm-9">
                                    <svg id="weight2" height="20px" width="600"></svg>
                                </div>
                            </div>
                            <div class="row" style="margin: 0px">
                                <div class="col-sm-12">
                                </div>
                            </div>
                        </div>
                        <div class="row" style="margin: 0px">
                            <div class="row" style="margin: 0px">
                                <div class="col-sm-3">
                                    <h5 id="state3"></h5>
                                </div>
                                <div class="col-sm-9" >
                                    <svg id="weight3" height="20px" width="600"></svg>
                                </div>
                            </div>
        
                        </div>
                    </div>
                    <div class="col-sm-2">
                        <div class="row"><svg id="bar-legends-all"></svg></div>
        
                    </div>
                </div>
        
                <div id="focus-panel" class="row" style="margin: 0px">
                    <h4 style="padding-left: 20px;text-decoration: underline">Select the factor to analyse its trend in these states over the past 7 years</h4>
                    <div class="col-sm-12" >
        
                        <button type="button" class="btn btn-primary btn-color" onclick="plotLineChart('unemployement')">Unemployement Rate</button>
                        <button type="button" class="btn btn-primary btn-color" onclick="plotLineChart('population')">Population</button>
                        <button type="button" class="btn btn-primary btn-color" onclick="plotLineChart('salary')">Average Salary</button>
                        <button type="button" class="btn btn-primary btn-color" onclick="plotLineChart('rental')">Rental Cost</button>
                        <button type="button" class="btn btn-primary btn-color" onclick="plotLineChart('mortality')">Mortality</button>
        
                    </div>
                </div>
                <br><br>
                <div id="brush-section" style="display:none">
                    <h4 style="padding-left: 20px; text-decoration: underline"> Select the years range to analyse using brush</h4>
                    <h6 style="padding-left: 20px;">Brush appear after you select any factor from above</h6>
                    <br>
                    <div class="row" style="margin: 0px;padding-left: 50px" id="year-brush" ><svg width="400px"></svg></div>
                </div>
            </div>
            <div class="col-sm-6">
                <div class="row" id="line-chart" style="margin: 0px">
                </div>
                <div class="row" id="legend-line-chart" style="margin: 0px">
                </div>
            </div>
        </div>
        

                <!-- <h2>Economy Overview</h2>
    <div class="controls">
        <label for="yearDropdown">Year:</label>
        <select id="yearDropdown">
            <option value="2016">2016</option>
            <option value="2017">2017</option>
            <option value="2018">2018</option>
            <option value="2019">2019</option>
            <option value="2020">2020</option>
            <option value="2021">2021</option>
            <option value="2022" selected>2022</option>
        </select>

        <label for="attributeDropdown">Attribute:</label>
        <select id="attributeDropdown">
            <option value="unemployment_rate">Unemployment Rate</option>
            <option value="mortality_rate">Mortality Rate</option>
            <option value="salary_avg">Average Salary</option>
            <option value="cost_per_sq_ft">Cost per Square Foot</option>
        </select>
    </div>
    <div id="visualizations" class="flex-container">
        <div id="map-container">
            <svg id="us-map" width="500" height="300"></svg>
        </div>
        <div id="barplot-container">
            <svg id="barplot" width="500" height="300"></svg>
        </div>
    </div>
    <div id="tooltip" style="position: absolute; visibility: hidden; background: white; padding: 5px; border: 1px solid #ccc;"></div>
                 <h2>Economy</h2>
                <img src="images/interviewer_economy.png" id="health-image" width="533" height="400" class="image" />
                <img src="images/pres_economy.PNG" id="health-image" width="533" height="400" class="image" />
                <svg id="visualization-economy" width="800" height="400" style="display: none;"></svg> -->
            </div>


            <div class="step quality-of-life" data-step="5">
                <div class="intro-image-container">
                    <img src="images/interviewer_qol.png" id="intro-image-1" class="intro-image" />
                    <img src="images/pres_qol.png" id="intro-image-2" class="intro-image" />
                </div>            
                <h2>This choropleth grid map visualizes the homeless population across the U.S. over the years, with color gradients indicating population levels by state. The accompanying bar chart further breaks down the data by gender, offering additional insights into demographic trends.</h2>    
                <div id="quality-container">
                    <div id="quality-map-container">
                        <svg id="quality-map-svg" width="800" height="600"></svg> <!-- Increased width to 1000px -->
                    </div>
                    
                    <!-- Bar Chart Container -->
                    <div id="quality-bar-chart-container">
                        <svg id="quality-bar-chart-svg" width="600" height="600"></svg> <!-- Bar chart SVG remains at 600x600px -->
                    </div>
                </div>
            </div>


            <div class="step education" data-step="6">
                <div class="education-container">
                    <div class="education-image-text-container">
                        <img src="images/interviewer_education.png" id="education-image" width="475" height="300" class="image" />
                        <img src="images/pres_education.png" id="education-image" width="475" height="300" class="image" />
                        <h4>This interactive map visualizes the total number of people in the U.S. with a high school 
                            diploma or higher, or a bachelor's degree or higher, with circle sizes representing the 
                            count for each state. You can group the data by age or race by pressing the respective button, 
                            where each segment is proportional to the amount. Additionally, a stacked bar chart outside the 
                            map shows the breakdown of people with high school and bachelor's degrees or higher by state. 
                            Hover over the bars to see the exact values for each educational level.</h4>
                    </div>
                    <div class="education-svg-container">
                        <!-- Dropdowns -->
                        <div class="education-dropdown-container">
                            <div>
                                <button id="ageButton" class="education-button" onclick="education_drawAge()">Age</button>
                                <button id="raceButton" class="education-button" onclick="education_drawRace()">Race</button>
                            </div>
                        </div>
                        <br>
                        <svg id="visualization-education" viewBox="0 0 1000 1000" preserveAspectRatio="xMidYMid meet"></svg>
                        <!-- Slider -->
                        <div class="slider-container">
                            <input type="range" id="yearSlider" min="2016" max="2023" step="1" value="2016" oninput="education_updateYearLabel(this.value)" list="tickmarks">
                            <span id="yearLabel">2016</span>
                        </div>
                    </div>
                </div>
            </div>      
            <div class="step outro" data-step="7">
                <div class="outro-container">
                    <div class="outro-image-container">
                        <img src="images/interviewer_outro.png" id="outro-image-1" class="outro-image" />
                        <img src="images/pres_outro.png" id="outro-image-2" class="outro-image" />
                    </div>
                    <svg id="visualization-outro" width="800" height="400" style="display: none;" class="outro-svg"></svg>
                </div>
            </div>
            <br><br><br><br><br><br><br><br>



        </div>        
        
    </div>

    <!-- import your separate JS files for each section -->
    <script  src="/subsections/intro.js"></script>
    <script  src="/subsections/safety.js"></script>
    <script  src="/subsections/health.js"></script>
    <script  src="/subsections/economy.js"></script>
    <script  src="/subsections/qualityoflife.js"></script>
    <script  src="/subsections/education.js"></script>
    <script  src="/subsections/outro.js"></script>
    <script  src="main.js"></script> <!-- controls scroll interactions -->

</body>
</html>
